<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Serviços Disponíveis</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&family=Montserrat:wght@600;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0f172a;          /* slate-900 */
      --card:#111827;        /* gray-900 */
      --muted:#94a3b8;       /* slate-400 */
      --text:#e5e7eb;        /* gray-200 */
      --primary:#3b82f6;     /* blue-500 */
      --primary-600:#2563eb; /* blue-600 */
      --ring: rgba(59,130,246,.45);
      --border: rgba(148,163,184,.35);
      --border-soft: rgba(148,163,184,.2);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji','Segoe UI Emoji', 'Segoe UI Symbol';
      background: radial-gradient(1200px 800px at 80% -10%, rgba(59,130,246,.12), transparent 60%),
                  radial-gradient(1200px 800px at 0% 110%, rgba(34,197,94,.10), transparent 60%),
                  var(--bg);
      color:var(--text);
      min-height:100dvh;
    }

    header{
      position:sticky; top:0; z-index:10;
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border-bottom:1px solid var(--border-soft);
      padding:16px 20px;
      text-align:center;
      font-size: clamp(18px, 2.2vw, 22px);
      font-weight:800;
      letter-spacing:.3px;
      backdrop-filter: blur(6px);
    }

    .toolbar{
      display:flex; gap:12px; justify-content:center; align-items:center;
      padding:14px 16px; flex-wrap:wrap;
    }
    /* Botão padrão do tema */
    .btn{
      display:inline-flex; align-items:center; gap:8px; justify-content:center;
      padding:10px 14px; border-radius:12px; cursor:pointer;
      font-weight:800; letter-spacing:.3px; text-decoration:none; color:var(--text);
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid var(--border);
      transition: background .2s ease, border-color .2s ease, transform .06s ease, box-shadow .2s ease;
    }
    .btn:hover{
      background: rgba(255,255,255,.07);
      border-color: rgba(148,163,184,.6);
      transform: translateY(-2px);
      box-shadow: 0 12px 30px rgba(0,0,0,.25);
    }

    .container{
      max-width:1100px; margin:0 auto; padding:18px;
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap:18px;
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid var(--border);
      border-radius:18px;
      padding:18px;
      display:flex; flex-direction:column; gap:10px;
      transition: box-shadow .2s ease, border-color .2s ease, transform .06s ease;
    }
    .card:hover{
      border-color: rgba(59,130,246,.5);
      box-shadow: 0 12px 30px rgba(0,0,0,.25);
      transform: translateY(-2px);
    }

    .card h3{
      margin:0; font-size:18px; line-height:1.3;
    }

    .meta{
      display:flex; gap:10px; flex-wrap:wrap; color:var(--muted); font-size:14px;
    }
    .meta .tag{
      background: rgba(255,255,255,.03); border:1px solid var(--border);
      color:var(--muted);
      padding:6px 10px; border-radius:999px;
      display:inline-flex; align-items:center; gap:6px;
    }

    .actions{ margin-top:auto; display:flex; justify-content:flex-end }

    /* Variação de botão de ação (mesmo visual base) */
    .btn-primary{ }

    .empty{
      text-align:center; color:var(--muted);
      padding:40px 10px;
      border:1px dashed var(--border);
      border-radius:12px; background: rgba(255,255,255,.02);
    }

    /* Mobile refinements */
    @media (max-width:480px){
      header{ padding:14px 12px; }
      .container{ padding:14px; }
      .btn{ width:100%; }
      .actions{ justify-content:stretch }
    }
 </style>
</head>
<body>

  <!-- TÍTULO DINÂMICO -->
  <h2 id="tituloServico" style="text-align: center;">
    Barbearia {{ usuario.username }}
  </h2>

  <header>Serviços Disponíveis</header>

  <div class="toolbar">
    <a class="btn" href="{{ url_for('main.consultar_publico', slug=usuario.slug) }}">
      Consultar Agenda
    </a>
  </div>

  <div class="container">
    {% if servicos and servicos|length > 0 %}
    <div class="grid">
      {% for servico in servicos %}
      <div class="card" data-id="{{ servico.id }}">
        <h3 title="{{ servico.titulo }}">{{ servico.titulo }}</h3>

        <div class="meta">
          <span class="tag">
            <i class="fa-solid fa-tag"></i> Valor: R$ {{ servico.valor }}
          </span>
          <span class="tag">
            <i class="fa-regular fa-clock"></i> Tempo: {{ servico.tempo }}
          </span>
        </div>

        <div class="actions">
          <a class="btn btn-primary"
             href="{{ url_for('main.agendar_por_id', servico_id=servico.id) }}">
            <i class="fa-solid fa-calendar-plus"></i> Agendar
          </a>
        </div>
      </div>
      {% endfor %}
    </div>
    {% else %}
      <div class="empty">
        <p><i class="fa-regular fa-face-smile"></i></p>
        <p>Nenhum serviço disponível no momento.</p>
        <p>Assim que o administrador criar serviços, eles aparecerão aqui.</p>
      </div>
    {% endif %}
  </div>

  <!-- APLICAÇÃO DO NOME FANTASIA + FONTE -->
  <script>
    const titulo = document.getElementById('tituloServico')

    const nomeFantasia = localStorage.getItem('nome_fantasia')
    const fonteTitulo  = localStorage.getItem('fonte_titulo')

    // aplicar nome fantasia
    if (nomeFantasia && nomeFantasia.trim() !== '') {
      titulo.textContent = nomeFantasia
    }

    // aplicar fonte escolhida
    switch (fonteTitulo) {
      case 'poppins':
        titulo.style.fontFamily = "'Poppins', sans-serif"
        break

      case 'montserrat':
        titulo.style.fontFamily = "'Montserrat', sans-serif"
        break

      case 'playfair':
        titulo.style.fontFamily = "'Playfair Display', serif"
        break

      default:
        titulo.style.fontFamily =
          "system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Arial"
    }
  </script>

</body>
</html>
